# 리팩터링: 정의와 당위성

## 리팩터링의 정의

리팩터링이라는 단어는 **무분별하게 사용**되지만, 이 책에서는 명사와 동사 두 가지로 정의됩니다.

### 명사로서의 리팩터링

리팩터링은 소프트웨어의 겉모습을 그대로 유지하면서 **코드를 이해하고 수정하기 쉽게 내부 구조를 변경하는 기법**입니다. 예를 들면, 함수 추출하기, 조건부 로직을 다형성으로 바꾸기 같은 기법들이 있습니다.

### 동사로서의 리팩터링

리팩터링은 위에서 언급한 명사의 기법들을 사용하여 **소프트웨어의 겉모습을 그대로 유지하면서 소프트웨어를 재구성하는 행위**를 뜻합니다. 이를 제외한다면 **코드의 재구성**이라는 말로 표현할 수 있습니다.

## 리팩터링의 필요성

리팩터링을 해야 하는 가장 중요한 이유는 단순히 코드를 보기 좋게 바꾸는 것이 아니라 **경제적인 목적에서 진행된다는 점**입니다. 필자 역시 테스트 코드 작성과 리팩터링에 무지한 상태로 작업을 해왔습니다. 하지만 어느 순간부터 새로운 기능을 추가할 때마다 **모든 의존성을 검토하고 부수 효과들을 확인하는 데 많은 비용이 소모됨**을 느꼈습니다. 이러한 이유로 리팩터링이라는 책을 접하게 되었습니다.

책의 저자가 설명하는 리팩터링의 이유는 다음과 같습니다:

1. **소프트웨어를 이해하기 쉽게 만든다.**
2. **버그를 쉽게 찾아낼 수 있도록 한다.**
3. **따라서 프로그래밍 속도를 높일 수 있다.**

저자의 주장에 상당히 동의하는 편입니다. 다만 데이터베이스 리팩토링의 경우에는 자세한 설명이 부족하여 아쉽습니다.

## 리팩터링에 대한 오해

리팩터링과 성능 최적화는 완전히 **다른 분야**입니다. 예전에는 반복문을 한 번 더 도는 것, 인스턴스를 새로 생성하는 것과 같은 자잘한 부분에 신경을 많이 썼습니다. 이러한 부분들이 성능에 영향을 미칠 것이라 생각했기 때문입니다. 하지만 대부분의 경우 성능은 제대로 측정하지 않은 채 진행했습니다.

리팩터링에 대한 몇 가지 오해를 풀어봅시다:

- **성능 저하 가능성**: 저자는 리팩터링으로 성능이 떨어질 수 있음을 인정합니다. 그러나 성능 저하는 대부분 아주 크지 않으며, 그로 인해 얻을 수 있는 리팩터링의 이점이 더욱 큽니다.
- **성능 최적화의 시기**: 성능 저하가 발생하더라도 리팩터링을 마친 후에 성능 최적화를 위한 수정을 적용하는 것이 옳다고 합니다.

> 리팩터링은 **코드의 가독성과 유지보수성을 높여주며**, 성능 최적화와는 별개의 과정임을 명심해야 합니다.
